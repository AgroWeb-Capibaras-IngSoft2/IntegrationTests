<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">pytest_report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">pytest_report.html</h1>
    <p>Report generated on 19-Jul-2025 at 15:30:24 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">10 tests took 00:01:16.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">8 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">2 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" disabled/>
            <span class="error">0 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.13.2&#34;, &#34;Platform&#34;: &#34;Windows-10-10.0.19045-SP0&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;8.4.1&#34;, &#34;pluggy&#34;: &#34;1.6.0&#34;}, &#34;Plugins&#34;: {&#34;html&#34;: &#34;4.1.1&#34;, &#34;json-report&#34;: &#34;1.5.0&#34;, &#34;metadata&#34;: &#34;3.1.1&#34;}}, &#34;tests&#34;: {&#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_exitoso&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_exitoso&#34;, &#34;duration&#34;: &#34;00:00:08&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_exitoso&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:08&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:42: in test_crear_carrito_exitoso\n    assert response.status_code == 201, f&amp;quot;Error creando carrito: {response.status_code} - {response.text}&amp;quot;\nE   AssertionError: Error creando carrito: 500 - &amp;lt;!doctype html&amp;gt;\nE     &amp;lt;html lang=en&amp;gt;\nE       &amp;lt;head&amp;gt;\nE         &amp;lt;title&amp;gt;ValueError: connection already closed\nE      // Werkzeug Debugger&amp;lt;/title&amp;gt;\nE         &amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;?__debugger__=yes&amp;amp;amp;cmd=resource&amp;amp;amp;f=style.css&amp;quot;&amp;gt;\nE         &amp;lt;link rel=&amp;quot;shortcut icon&amp;quot;\nE             href=&amp;quot;?__debugger__=yes&amp;amp;amp;cmd=resource&amp;amp;amp;f=console.png&amp;quot;&amp;gt;\nE         &amp;lt;script src=&amp;quot;?__debugger__=yes&amp;amp;amp;cmd=resource&amp;amp;amp;f=debugger.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;\nE         &amp;lt;script&amp;gt;\nE           var CONSOLE_MODE = false,\nE               EVALEX = true,\nE               EVALEX_TRUSTED = false,\nE               SECRET = &amp;quot;nPBDzGGZTEmkBcSBWG3N&amp;quot;;\nE         &amp;lt;/script&amp;gt;\nE       &amp;lt;/head&amp;gt;\nE       &amp;lt;body style=&amp;quot;background-color: #fff&amp;quot;&amp;gt;\nE         &amp;lt;div class=&amp;quot;debugger&amp;quot;&amp;gt;\nE     &amp;lt;h1&amp;gt;ValueError&amp;lt;/h1&amp;gt;\nE     &amp;lt;div class=&amp;quot;detail&amp;quot;&amp;gt;\nE       &amp;lt;p class=&amp;quot;errormsg&amp;quot;&amp;gt;ValueError: connection already closed\nE     &amp;lt;/p&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     &amp;lt;h2 class=&amp;quot;traceback&amp;quot;&amp;gt;Traceback &amp;lt;em&amp;gt;(most recent call last)&amp;lt;/em&amp;gt;&amp;lt;/h2&amp;gt;\nE     &amp;lt;div class=&amp;quot;traceback&amp;quot;&amp;gt;\nE       &amp;lt;h3&amp;gt;&amp;lt;/h3&amp;gt;\nE       &amp;lt;ul&amp;gt;&amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230144&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;17&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;validarExistenciaCarrito&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;sqlQuery=&amp;amp;#34;&amp;amp;#34;&amp;amp;#34;SELECT id_carrito&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;FROM carrito&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;WHERE userdocument=%s AND userdocumenttype=%s ;&amp;amp;#34;&amp;amp;#34;&amp;amp;#34;&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;rows=None&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;with self.connection.cursor() as cursor:\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;     ^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;cursor.execute(sqlQuery,(numberDocument,typeDocument))&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;rows=cursor.fetchall()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;if(len(rows)!=0):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;return True&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;else:&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;exc-divider&amp;quot;&amp;gt;During handling of the above exception, another exception occurred:&amp;lt;/div&amp;gt;\nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928343954064&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;1536&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;__call__&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;) -&amp;amp;gt; cabc.Iterable[bytes]:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;amp;#34;The WSGI server calls the Flask application object as the&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;WSGI application. This calls :meth:`wsgi_app`, which can be&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;wrapped to apply middleware.&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;amp;#34;&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return self.wsgi_app(environ, start_response)\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928343961264&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;1514&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wsgi_app&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;ctx.push()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;response = self.full_dispatch_request()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;error = e&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;response = self.handle_exception(e)\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;           ^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;except:  # noqa: B001&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;error = sys.exc_info()[1]&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;raise&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;return response(environ, start_response)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;finally:&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230432&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;176&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wrapped_function&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;# These error handlers will still respect the behavior of the route&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;if options.get(&amp;amp;#34;intercept_exceptions&amp;amp;#34;, True):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;def _after_request_decorator(f):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;def wrapped_function(*args, **kwargs):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;return cors_after_request(app.make_response(f(*args, **kwargs)))\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;                                            ^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;return wrapped_function&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;if hasattr(app, &amp;amp;#34;handle_exception&amp;amp;#34;):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;app.handle_exception = _after_request_decorator(app.handle_exception)&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344231584&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;1511&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wsgi_app&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;ctx = self.request_context(environ)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;error: BaseException | None = None&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;ctx.push()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;response = self.full_dispatch_request()\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;error = e&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;response = self.handle_exception(e)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;except:  # noqa: B001&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;error = sys.exc_info()[1]&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344231872&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;919&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;full_dispatch_request&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;request_started.send(self, _async_wrapper=self.ensure_sync)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;rv = self.preprocess_request()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;if rv is None:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;rv = self.dispatch_request()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;rv = self.handle_user_exception(e)\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return self.finalize_request(rv)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;def finalize_request(&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;self,&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;rv: ft.ResponseReturnValue | HTTPException,&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344231152&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;176&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wrapped_function&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;# These error handlers will still respect the behavior of the route&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;if options.get(&amp;amp;#34;intercept_exceptions&amp;amp;#34;, True):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;def _after_request_decorator(f):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;def wrapped_function(*args, **kwargs):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;return cors_after_request(app.make_response(f(*args, **kwargs)))\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;                                            ^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;return wrapped_function&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;if hasattr(app, &amp;amp;#34;handle_exception&amp;amp;#34;):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;app.handle_exception = _after_request_decorator(app.handle_exception)&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230288&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;917&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;full_dispatch_request&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;request_started.send(self, _async_wrapper=self.ensure_sync)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;rv = self.preprocess_request()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;if rv is None:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;rv = self.dispatch_request()\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;     ^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;rv = self.handle_user_exception(e)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return self.finalize_request(rv)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;def finalize_request(&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230000&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;902&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;dispatch_request&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source library&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;and req.method == &amp;amp;#34;OPTIONS&amp;amp;#34;&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;return self.make_default_options_response()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;# otherwise dispatch to the handler for that endpoint&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;def full_dispatch_request(self) -&amp;amp;gt; Response:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;&amp;amp;#34;&amp;amp;#34;&amp;amp;#34;Dispatches the request and on top of that performs request&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;pre and postprocessing as well as HTTP exception catching and&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;error handling.&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230576&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;39&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wrapper&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;# 5. Contar errores de excepci\u00f3n&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;ERROR_COUNT.labels(endpoint=endpoint_name).inc()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;# Medir tiempo aunque haya error&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;REQUEST_LATENCY.observe(time.time() - start_time)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;raise e  # Re-lanzar la excepci\u00f3n\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return wrapper&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;return decorator&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230864&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;18&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;wrapper&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;# 2. Contar la petici\u00f3n&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;REQUEST_COUNT.labels(method=request.method, endpoint=endpoint_name).inc()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;# 3. Ejecutar la funci\u00f3n&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;response = func(*args, **kwargs)\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;           ^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;# 4. Medir tiempo total&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;REQUEST_LATENCY.observe(time.time() - start_time)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;# 5. Verificar si hay errores HTTP (4xx, 5xx)&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344231008&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;60&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;crear_carrito&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;@bp.route(&amp;amp;#34;/carrito/create&amp;amp;#34;,methods=[&amp;amp;#34;POST&amp;amp;#34;])&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;@monitor_endpoint(&amp;amp;#34;crear_carrito&amp;amp;#34;)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt;def crear_carrito():&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;data=request.get_json()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;#Esta data se pasa al caso de uso encargado&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;resul=createCarUseCase.crearCarrito(data.get(&amp;amp;#34;userDocument&amp;amp;#34;),data.get(&amp;amp;#34;docType&amp;amp;#34;))\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;#TODO: Cerrar conexi\u00f3n&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;if(resul[&amp;amp;#34;Success&amp;amp;#34;]):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return jsonify(resul),200&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;else:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return jsonify(resul),409&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344230720&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;14&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;crearCarrito&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;crearCarrRepo:CrearCarrritoI&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;utils:UtilsI&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;def crearCarrito(self,usrDocument:str,userDocType:str):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;new_carrito = Carrito(user_document=usrDocument,user_documentType=userDocType)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;self.crearCarrRepo.crearCarrito(new_carrito)&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;return {&amp;amp;#34;Success&amp;amp;#34;:True,&amp;amp;#34;message&amp;amp;#34;:&amp;amp;#34;Carrito creado con exito&amp;amp;#34;}&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;li&amp;gt;&amp;lt;div class=&amp;quot;frame&amp;quot; id=&amp;quot;frame-1928344231440&amp;quot;&amp;gt;\nE       &amp;lt;h4&amp;gt;File &amp;lt;cite class=&amp;quot;filename&amp;quot;&amp;gt;&amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;quot;&amp;lt;/cite&amp;gt;,\nE           line &amp;lt;em class=&amp;quot;line&amp;quot;&amp;gt;25&amp;lt;/em&amp;gt;,\nE           in &amp;lt;code class=&amp;quot;function&amp;quot;&amp;gt;validarExistenciaCarrito&amp;lt;/code&amp;gt;&amp;lt;/h4&amp;gt;\nE       &amp;lt;div class=&amp;quot;source &amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;if(len(rows)!=0):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;return True&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                &amp;lt;/span&amp;gt;else:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;                    &amp;lt;/span&amp;gt;return False&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line before&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;except Exception as e:&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line current&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;raise ValueError(str(e))\nE     &amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;            &amp;lt;/span&amp;gt;^^^^^^^^^^^^^^^^^^^^^^^^&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;self.connection.close()&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;return False&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;&amp;lt;/span&amp;gt; &amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;    &amp;lt;/span&amp;gt;def existsCarrito(self,id_carrito:int):&amp;lt;/pre&amp;gt;\nE     &amp;lt;pre class=&amp;quot;line after&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;ws&amp;quot;&amp;gt;        &amp;lt;/span&amp;gt;try:&amp;lt;/pre&amp;gt;&amp;lt;/div&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     &amp;lt;/ul&amp;gt;\nE       &amp;lt;blockquote&amp;gt;ValueError: connection already closed\nE     &amp;lt;/blockquote&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     \nE     &amp;lt;div class=&amp;quot;plain&amp;quot;&amp;gt;\nE         &amp;lt;p&amp;gt;\nE           This is the Copy/Paste friendly version of the traceback.\nE         &amp;lt;/p&amp;gt;\nE         &amp;lt;textarea cols=&amp;quot;50&amp;quot; rows=&amp;quot;10&amp;quot; name=&amp;quot;code&amp;quot; readonly&amp;gt;Traceback (most recent call last):\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;amp;#34;, line 17, in validarExistenciaCarrito\nE         with self.connection.cursor() as cursor:\nE              ~~~~~~~~~~~~~~~~~~~~~~^^\nE     psycopg2.InterfaceError: connection already closed\nE     \nE     During handling of the above exception, another exception occurred:\nE     \nE     Traceback (most recent call last):\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 1536, in __call__\nE         return self.wsgi_app(environ, start_response)\nE                ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 1514, in wsgi_app\nE         response = self.handle_exception(e)\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;amp;#34;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 1511, in wsgi_app\nE         response = self.full_dispatch_request()\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 919, in full_dispatch_request\nE         rv = self.handle_user_exception(e)\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;amp;#34;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 917, in full_dispatch_request\nE         rv = self.dispatch_request()\nE       File &amp;amp;#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;amp;#34;, line 902, in dispatch_request\nE         return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;amp;#34;, line 39, in wrapper\nE         raise e  # Re-lanzar la excepci\u00f3n\nE         ^^^^^^^\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;amp;#34;, line 18, in wrapper\nE         response = func(*args, **kwargs)\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py&amp;amp;#34;, line 60, in crear_carrito\nE         resul=createCarUseCase.crearCarrito(data.get(&amp;amp;#34;userDocument&amp;amp;#34;),data.get(&amp;amp;#34;docType&amp;amp;#34;))\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py&amp;amp;#34;, line 14, in crearCarrito\nE         if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &amp;amp;#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;amp;#34;, line 25, in validarExistenciaCarrito\nE         raise ValueError(str(e))\nE     ValueError: connection already closed\nE     &amp;lt;/textarea&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE     &amp;lt;div class=&amp;quot;explanation&amp;quot;&amp;gt;\nE       The debugger caught an exception in your WSGI application.  You can now\nE       look at the traceback which led to the error.  &amp;lt;span class=&amp;quot;nojavascript&amp;quot;&amp;gt;\nE       If you enable JavaScript you can also use additional features such as code\nE       execution (if the evalex feature is enabled), automatic pasting of the\nE       exceptions and much more.&amp;lt;/span&amp;gt;\nE     &amp;lt;/div&amp;gt;\nE           &amp;lt;div class=&amp;quot;footer&amp;quot;&amp;gt;\nE             Brought to you by &amp;lt;strong class=&amp;quot;arthur&amp;quot;&amp;gt;DON&amp;#x27;T PANIC&amp;lt;/strong&amp;gt;, your\nE             friendly Werkzeug powered traceback interpreter.\nE           &amp;lt;/div&amp;gt;\nE         &amp;lt;/div&amp;gt;\nE     \nE         &amp;lt;div class=&amp;quot;pin-prompt&amp;quot;&amp;gt;\nE           &amp;lt;div class=&amp;quot;inner&amp;quot;&amp;gt;\nE             &amp;lt;h3&amp;gt;Console Locked&amp;lt;/h3&amp;gt;\nE             &amp;lt;p&amp;gt;\nE               The console is locked and needs to be unlocked by entering the PIN.\nE               You can find the PIN printed out on the standard output of your\nE               shell that runs the server.\nE             &amp;lt;form&amp;gt;\nE               &amp;lt;p&amp;gt;PIN:\nE                 &amp;lt;input type=text name=pin size=14&amp;gt;\nE                 &amp;lt;input type=submit name=btn value=&amp;quot;Confirm Pin&amp;quot;&amp;gt;\nE             &amp;lt;/form&amp;gt;\nE           &amp;lt;/div&amp;gt;\nE         &amp;lt;/div&amp;gt;\nE       &amp;lt;/body&amp;gt;\nE     &amp;lt;/html&amp;gt;\nE     \nE     &amp;lt;!--\nE     \nE     Traceback (most recent call last):\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;quot;, line 17, in validarExistenciaCarrito\nE         with self.connection.cursor() as cursor:\nE              ~~~~~~~~~~~~~~~~~~~~~~^^\nE     psycopg2.InterfaceError: connection already closed\nE     \nE     During handling of the above exception, another exception occurred:\nE     \nE     Traceback (most recent call last):\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 1536, in __call__\nE         return self.wsgi_app(environ, start_response)\nE                ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 1514, in wsgi_app\nE         response = self.handle_exception(e)\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;quot;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 1511, in wsgi_app\nE         response = self.full_dispatch_request()\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 919, in full_dispatch_request\nE         rv = self.handle_user_exception(e)\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&amp;quot;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 917, in full_dispatch_request\nE         rv = self.dispatch_request()\nE       File &amp;quot;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&amp;quot;, line 902, in dispatch_request\nE         return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;quot;, line 39, in wrapper\nE         raise e  # Re-lanzar la excepci\u00f3n\nE         ^^^^^^^\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&amp;quot;, line 18, in wrapper\nE         response = func(*args, **kwargs)\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py&amp;quot;, line 60, in crear_carrito\nE         resul=createCarUseCase.crearCarrito(data.get(&amp;quot;userDocument&amp;quot;),data.get(&amp;quot;docType&amp;quot;))\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py&amp;quot;, line 14, in crearCarrito\nE         if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &amp;quot;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&amp;quot;, line 25, in validarExistenciaCarrito\nE         raise ValueError(str(e))\nE     ValueError: connection already closed\nE     \nE     \nE     --&amp;gt;\nE     \nE   assert 500 == 201\nE    +  where 500 = &amp;lt;Response [500]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:02,040 - conftest - INFO - \ud83e\uddea Ejecutando: test_crear_carrito_exitoso\n2025-07-19 15:29:02,044 - carrito.conftest - INFO - \ud83d\udd0d Verificando disponibilidad del Servicio de Carrito de Compras...\n2025-07-19 15:29:04,097 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n2025-07-19 15:29:06,141 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n2025-07-19 15:29:08,175 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_crear_carrito_exitoso\nINFO     carrito.conftest:conftest.py:36 \ud83d\udd0d Verificando disponibilidad del Servicio de Carrito de Compras...\nWARNING  carrito.conftest:conftest.py:47 \u26a0\ufe0f API responde con c\u00f3digo 201\nWARNING  carrito.conftest:conftest.py:47 \u26a0\ufe0f API responde con c\u00f3digo 201\nWARNING  carrito.conftest:conftest.py:47 \u26a0\ufe0f API responde con c\u00f3digo 201\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:08,182 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 15:29:10,246 - root - INFO - Response: 500(28865 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/create\nINFO     root:api_client.py:35 Response: 500(28865 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:10,699 - conftest - INFO - \u2705 Completado: test_crear_carrito_exitoso\n2025-07-19 15:29:10,702 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.52s\n2025-07-19 15:29:10,703 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_crear_carrito_exitoso\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 2.52s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_a_carrito&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_a_carrito&#34;, &#34;duration&#34;: &#34;00:00:10&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_a_carrito&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:10&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:122: in test_agregar_producto_a_carrito\n    assert response_time &amp;lt;= threshold, f&amp;quot;Agregar producto muy lento: {response_time:.2f}ms (max: {threshold}ms)&amp;quot;\nE   AssertionError: Agregar producto muy lento: 6092.34ms (max: 400ms)\nE   assert 6092.3402309417725 &amp;lt;= 400\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:10,719 - conftest - INFO - \ud83e\uddea Ejecutando: test_agregar_producto_a_carrito\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_agregar_producto_a_carrito\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:10,724 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 15:29:10,726 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 15:29:16,817 - root - INFO - Response: 200(412 bytes )\n2025-07-19 15:29:16,819 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/1\n2025-07-19 15:29:18,846 - root - INFO - Response: 201(48 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     carrito.conftest:conftest.py:92 \ud83d\uded2 Carrito registrado para limpieza: 1\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/addProduct\nINFO     root:api_client.py:35 Response: 200(412 bytes )\nINFO     root:api_client.py:29 GEThttp://localhost:5003/carrito/getCarrito/1\nINFO     root:api_client.py:35 Response: 201(48 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:18,879 - conftest - INFO - \u2705 Completado: test_agregar_producto_a_carrito\n2025-07-19 15:29:18,884 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 15:29:20,920 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 15:29:20,925 - carrito.conftest - INFO - \ud83d\udcca Test completado en 10.20s\n2025-07-19 15:29:20,935 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_agregar_producto_a_carrito\nINFO     carrito.conftest:conftest.py:98 \ud83e\uddf9 Limpiando 1 carritos de prueba...\nWARNING  carrito.conftest:conftest.py:114 \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 10.20s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_exitoso&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_exitoso&#34;, &#34;duration&#34;: &#34;00:00:04&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_exitoso&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:04&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:147: in test_obtener_carrito_exitoso\n    assert response.status_code == 200, f&amp;quot;Error obteniendo carrito: {response.status_code} - {response.text}&amp;quot;\nE   AssertionError: Error obteniendo carrito: 201 - {\nE       &amp;quot;Success&amp;quot;: false,\nE       &amp;quot;message&amp;quot;: &amp;quot;&amp;#x27;result&amp;#x27;&amp;quot;\nE     }\nE     \nE   assert 201 == 200\nE    +  where 201 = &amp;lt;Response [201]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:20,941 - conftest - INFO - \ud83e\uddea Ejecutando: test_obtener_carrito_exitoso\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_obtener_carrito_exitoso\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:20,947 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 15:29:20,959 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/1\n2025-07-19 15:29:22,997 - root - INFO - Response: 201(48 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     carrito.conftest:conftest.py:92 \ud83d\uded2 Carrito registrado para limpieza: 1\nINFO     root:api_client.py:29 GEThttp://localhost:5003/carrito/getCarrito/1\nINFO     root:api_client.py:35 Response: 201(48 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:23,039 - conftest - INFO - \u2705 Completado: test_obtener_carrito_exitoso\n2025-07-19 15:29:23,041 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 15:29:25,065 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 15:29:25,067 - carrito.conftest - INFO - \ud83d\udcca Test completado en 4.12s\n2025-07-19 15:29:25,068 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_obtener_carrito_exitoso\nINFO     carrito.conftest:conftest.py:98 \ud83e\uddf9 Limpiando 1 carritos de prueba...\nWARNING  carrito.conftest:conftest.py:114 \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 4.12s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_cambiar_cantidad_producto&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_cambiar_cantidad_producto&#34;, &#34;duration&#34;: &#34;00:00:14&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_cambiar_cantidad_producto&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:14&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:209: in test_cambiar_cantidad_producto\n    assert response.status_code == 200, f&amp;quot;Error cambiando cantidad: {response.status_code} - {response.text}&amp;quot;\nE   AssertionError: Error cambiando cantidad: 500 - {\nE       &amp;quot;Success&amp;quot;: false,\nE       &amp;quot;message&amp;quot;: &amp;quot;HTTPConnectionPool(host=&amp;#x27;localhost&amp;#x27;, port=5000): Max retries exceeded with url: /products/PROD-577D6765 (Caused by NewConnectionError(&amp;#x27;&amp;lt;urllib3.connection.HTTPConnection object at 0x000001C0FA420AF0&amp;gt;: Failed to establish a new connection: [WinError 10061] No se puede establecer una conexi\\u00f3n ya que el equipo de destino deneg\\u00f3 expresamente dicha conexi\\u00f3n&amp;#x27;))&amp;quot;\nE     }\nE     \nE   assert 500 == 200\nE    +  where 500 = &amp;lt;Response [500]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:25,073 - conftest - INFO - \ud83e\uddea Ejecutando: test_cambiar_cantidad_producto\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_cambiar_cantidad_producto\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:25,080 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 15:29:25,085 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 15:29:31,164 - root - INFO - Response: 200(412 bytes )\n2025-07-19 15:29:31,166 - root - INFO - PUThttp://localhost:5003/carrito/changeQuantity\n2025-07-19 15:29:37,269 - root - INFO - Response: 500(412 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     carrito.conftest:conftest.py:92 \ud83d\uded2 Carrito registrado para limpieza: 1\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/addProduct\nINFO     root:api_client.py:35 Response: 200(412 bytes )\nINFO     root:api_client.py:29 PUThttp://localhost:5003/carrito/changeQuantity\nINFO     root:api_client.py:35 Response: 500(412 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:37,302 - conftest - INFO - \u2705 Completado: test_cambiar_cantidad_producto\n2025-07-19 15:29:37,304 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 15:29:39,355 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 15:29:39,357 - carrito.conftest - INFO - \ud83d\udcca Test completado en 14.28s\n2025-07-19 15:29:39,358 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_cambiar_cantidad_producto\nINFO     carrito.conftest:conftest.py:98 \ud83e\uddf9 Limpiando 1 carritos de prueba...\nWARNING  carrito.conftest:conftest.py:114 \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 14.28s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_vaciar_carrito_exitoso&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_vaciar_carrito_exitoso&#34;, &#34;duration&#34;: &#34;00:00:10&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_vaciar_carrito_exitoso&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:10&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:246: in test_vaciar_carrito_exitoso\n    assert response.status_code == 200, f&amp;quot;Error vaciando carrito: {response.status_code} - {response.text}&amp;quot;\nE   AssertionError: Error vaciando carrito: 400 - {\nE       &amp;quot;Success&amp;quot;: false,\nE       &amp;quot;message&amp;quot;: &amp;quot;No se ha enviado un id de carrito para procesar la solicitud&amp;quot;\nE     }\nE     \nE   assert 400 == 200\nE    +  where 400 = &amp;lt;Response [400]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:39,365 - conftest - INFO - \ud83e\uddea Ejecutando: test_vaciar_carrito_exitoso\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_vaciar_carrito_exitoso\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:39,374 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 15:29:39,388 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 15:29:45,462 - root - INFO - Response: 200(412 bytes )\n2025-07-19 15:29:45,464 - root - INFO - DELETEhttp://localhost:5003/carrito/vaciar\n2025-07-19 15:29:47,510 - root - INFO - Response: 400(100 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     carrito.conftest:conftest.py:92 \ud83d\uded2 Carrito registrado para limpieza: 1\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/addProduct\nINFO     root:api_client.py:35 Response: 200(412 bytes )\nINFO     root:api_client.py:29 DELETEhttp://localhost:5003/carrito/vaciar\nINFO     root:api_client.py:35 Response: 400(100 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:47,540 - conftest - INFO - \u2705 Completado: test_vaciar_carrito_exitoso\n2025-07-19 15:29:47,544 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 15:29:49,587 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 15:29:49,588 - carrito.conftest - INFO - \ud83d\udcca Test completado en 10.22s\n2025-07-19 15:29:49,590 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_vaciar_carrito_exitoso\nINFO     carrito.conftest:conftest.py:98 \ud83e\uddf9 Limpiando 1 carritos de prueba...\nWARNING  carrito.conftest:conftest.py:114 \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 10.22s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_inexistente&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_inexistente&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_inexistente&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:274: in test_obtener_carrito_inexistente\n    assert response.status_code == 404, f&amp;quot;Deber\u00eda retornar 404 para carrito inexistente, obtuvo: {response.status_code}&amp;quot;\nE   AssertionError: Deber\u00eda retornar 404 para carrito inexistente, obtuvo: 201\nE   assert 201 == 404\nE    +  where 201 = &amp;lt;Response [201]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:49,607 - conftest - INFO - \ud83e\uddea Ejecutando: test_obtener_carrito_inexistente\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_obtener_carrito_inexistente\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:49,613 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/999999\n2025-07-19 15:29:51,638 - root - INFO - Response: 201(48 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 GEThttp://localhost:5003/carrito/getCarrito/999999\nINFO     root:api_client.py:35 Response: 201(48 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:51,674 - conftest - INFO - \u2705 Completado: test_obtener_carrito_inexistente\n2025-07-19 15:29:51,679 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.07s\n2025-07-19 15:29:51,682 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_obtener_carrito_inexistente\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 2.07s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_carrito_inexistente&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_carrito_inexistente&#34;, &#34;duration&#34;: &#34;00:00:06&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_carrito_inexistente&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:06&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:300: in test_agregar_producto_carrito_inexistente\n    assert response.status_code in [400, 404, 500], f&amp;quot;Deber\u00eda fallar con 400/404/500, obtuvo: {response.status_code}&amp;quot;\nE   AssertionError: Deber\u00eda fallar con 400/404/500, obtuvo: 200\nE   assert 200 in [400, 404, 500]\nE    +  where 200 = &amp;lt;Response [200]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:51,689 - conftest - INFO - \ud83e\uddea Ejecutando: test_agregar_producto_carrito_inexistente\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_agregar_producto_carrito_inexistente\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:51,699 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 15:29:57,800 - root - INFO - Response: 200(412 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/addProduct\nINFO     root:api_client.py:35 Response: 200(412 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:57,831 - conftest - INFO - \u2705 Completado: test_agregar_producto_carrito_inexistente\n2025-07-19 15:29:57,833 - carrito.conftest - INFO - \ud83d\udcca Test completado en 6.14s\n2025-07-19 15:29:57,834 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_agregar_producto_carrito_inexistente\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 6.14s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_datos_invalidos_crear_carrito&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_datos_invalidos_crear_carrito&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_datos_invalidos_crear_carrito&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:57,838 - conftest - INFO - \ud83e\uddea Ejecutando: test_datos_invalidos_crear_carrito\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_datos_invalidos_crear_carrito\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:57,843 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 15:29:59,936 - root - INFO - Response: 500(28865 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/create\nINFO     root:api_client.py:35 Response: 500(28865 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:29:59,940 - conftest - INFO - \u2705 Completado: test_datos_invalidos_crear_carrito\n2025-07-19 15:29:59,945 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.10s\n2025-07-19 15:29:59,952 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_datos_invalidos_crear_carrito\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 2.10s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_campos_faltantes&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_campos_faltantes&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_campos_faltantes&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:29:59,966 - conftest - INFO - \ud83e\uddea Ejecutando: test_crear_carrito_campos_faltantes\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_crear_carrito_campos_faltantes\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:29:59,975 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 15:30:02,050 - root - INFO - Response: 500(28865 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/create\nINFO     root:api_client.py:35 Response: 500(28865 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:30:02,053 - conftest - INFO - \u2705 Completado: test_crear_carrito_campos_faltantes\n2025-07-19 15:30:02,060 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.09s\n2025-07-19 15:30:02,063 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_crear_carrito_campos_faltantes\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 2.09s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 1 total, 0 exitosos&#34;}], &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_flujo_completo_carrito&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_flujo_completo_carrito&#34;, &#34;duration&#34;: &#34;00:00:16&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_flujo_completo_carrito&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:16&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;tests\\carrito\\test_api_integration.py:395: in test_flujo_completo_carrito\n    assert change_response.status_code == 200, f&amp;quot;Error cambiando cantidad: {change_response.status_code}&amp;quot;\nE   AssertionError: Error cambiando cantidad: 500\nE   assert 500 == 200\nE    +  where 500 = &amp;lt;Response [500]&amp;gt;.status_code\n\n---------------------------- Captured stderr setup -----------------------------\n2025-07-19 15:30:02,073 - conftest - INFO - \ud83e\uddea Ejecutando: test_flujo_completo_carrito\n\n------------------------------ Captured log setup ------------------------------\nINFO     conftest:conftest.py:181 \ud83e\uddea Ejecutando: test_flujo_completo_carrito\n\n----------------------------- Captured stderr call -----------------------------\n2025-07-19 15:30:02,082 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 15:30:04,150 - root - INFO - Response: 500(28865 bytes )\n2025-07-19 15:30:04,151 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 15:30:04,152 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 15:30:10,246 - root - INFO - Response: 200(412 bytes )\n2025-07-19 15:30:10,282 - root - INFO - PUThttp://localhost:5003/carrito/changeQuantity\n2025-07-19 15:30:16,358 - root - INFO - Response: 500(412 bytes )\n\n------------------------------ Captured log call -------------------------------\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/create\nINFO     root:api_client.py:35 Response: 500(28865 bytes )\nINFO     carrito.conftest:conftest.py:92 \ud83d\uded2 Carrito registrado para limpieza: 1\nINFO     root:api_client.py:29 POSThttp://localhost:5003/carrito/addProduct\nINFO     root:api_client.py:35 Response: 200(412 bytes )\nINFO     root:api_client.py:29 PUThttp://localhost:5003/carrito/changeQuantity\nINFO     root:api_client.py:35 Response: 500(412 bytes )\n\n--------------------------- Captured stderr teardown ---------------------------\n2025-07-19 15:30:16,406 - conftest - INFO - \u2705 Completado: test_flujo_completo_carrito\n2025-07-19 15:30:16,411 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 15:30:18,449 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 15:30:18,450 - carrito.conftest - INFO - \ud83d\udcca Test completado en 16.37s\n2025-07-19 15:30:18,451 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 0 total, 0 exitosos\n\n---------------------------- Captured log teardown -----------------------------\nINFO     conftest:conftest.py:185 \u2705 Completado: test_flujo_completo_carrito\nINFO     carrito.conftest:conftest.py:98 \ud83e\uddf9 Limpiando 1 carritos de prueba...\nWARNING  carrito.conftest:conftest.py:114 \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\nINFO     carrito.conftest:conftest.py:80 \ud83d\udcca Test completado en 16.37s\nINFO     carrito.conftest:conftest.py:81 \ud83d\udcc8 Requests: 0 total, 0 exitosos&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;pytest_report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>