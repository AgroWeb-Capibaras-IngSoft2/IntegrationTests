{"created": 1752952848.8044484, "duration": 76.68090438842773, "exitcode": 1, "root": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests", "environment": {}, "summary": {"failed": 8, "passed": 2, "total": 10, "collected": 10}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/carrito/test_api_integration.py", "type": "Module"}]}, {"nodeid": "tests/carrito/test_api_integration.py::TestConfig", "outcome": "passed", "result": []}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration", "outcome": "passed", "result": [{"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_exitoso", "type": "Function", "lineno": 22}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_a_carrito", "type": "Function", "lineno": 63}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_exitoso", "type": "Function", "lineno": 125}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_cambiar_cantidad_producto", "type": "Function", "lineno": 174}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_vaciar_carrito_exitoso", "type": "Function", "lineno": 216}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_inexistente", "type": "Function", "lineno": 255}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_carrito_inexistente", "type": "Function", "lineno": 277}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_datos_invalidos_crear_carrito", "type": "Function", "lineno": 303}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_campos_faltantes", "type": "Function", "lineno": 334}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_flujo_completo_carrito", "type": "Function", "lineno": 358}]}, {"nodeid": "tests/carrito/test_api_integration.py", "outcome": "passed", "result": [{"nodeid": "tests/carrito/test_api_integration.py::TestConfig", "type": "Class"}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration", "type": "Class"}]}], "tests": [{"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_exitoso", "lineno": 22, "outcome": "failed", "keywords": ["test_crear_carrito_exitoso", "integration", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 6.148358099977486, "outcome": "passed", "stderr": "2025-07-19 14:19:32,210 - conftest - INFO - \ud83e\uddea Ejecutando: test_crear_carrito_exitoso\n2025-07-19 14:19:32,214 - carrito.conftest - INFO - \ud83d\udd0d Verificando disponibilidad del Servicio de Carrito de Compras...\n2025-07-19 14:19:34,266 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n2025-07-19 14:19:36,314 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n2025-07-19 14:19:38,356 - carrito.conftest - WARNING - \u26a0\ufe0f API responde con c\u00f3digo 201\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_crear_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952772.2109559, "msecs": 210.0, "relativeCreated": 1643.9026, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:32"}, {"name": "carrito.conftest", "msg": "\ud83d\udd0d Verificando disponibilidad del Servicio de Carrito de Compras...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 36, "funcName": "carrito_api_health_check", "created": 1752952772.2144127, "msecs": 214.0, "relativeCreated": 1647.3596, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:32"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f API responde con c\u00f3digo 201", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 47, "funcName": "carrito_api_health_check", "created": 1752952774.2669983, "msecs": 266.0, "relativeCreated": 3699.9452, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:34"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f API responde con c\u00f3digo 201", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 47, "funcName": "carrito_api_health_check", "created": 1752952776.3142998, "msecs": 314.0, "relativeCreated": 5747.2469, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:36"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f API responde con c\u00f3digo 201", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 47, "funcName": "carrito_api_health_check", "created": 1752952778.3567557, "msecs": 356.0, "relativeCreated": 7789.7027, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:38"}]}, "call": {"duration": 2.080013200000394, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 42, "message": "AssertionError: Error creando carrito: 500 - <!doctype html>\n  <html lang=en>\n    <head>\n      <title>ValueError: connection already closed\n   // Werkzeug Debugger</title>\n      <link rel=\"stylesheet\" href=\"?__debugger__=yes&amp;cmd=resource&amp;f=style.css\">\n      <link rel=\"shortcut icon\"\n          href=\"?__debugger__=yes&amp;cmd=resource&amp;f=console.png\">\n      <script src=\"?__debugger__=yes&amp;cmd=resource&amp;f=debugger.js\"></script>\n      <script>\n        var CONSOLE_MODE = false,\n            EVALEX = true,\n            EVALEX_TRUSTED = false,\n            SECRET = \"nPBDzGGZTEmkBcSBWG3N\";\n      </script>\n    </head>\n    <body style=\"background-color: #fff\">\n      <div class=\"debugger\">\n  <h1>ValueError</h1>\n  <div class=\"detail\">\n    <p class=\"errormsg\">ValueError: connection already closed\n  </p>\n  </div>\n  <h2 class=\"traceback\">Traceback <em>(most recent call last)</em></h2>\n  <div class=\"traceback\">\n    <h3></h3>\n    <ul><li><div class=\"frame\" id=\"frame-1928343945424\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\"</cite>,\n        line <em class=\"line\">17</em>,\n        in <code class=\"function\">validarExistenciaCarrito</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">        </span>sqlQuery=&#34;&#34;&#34;SELECT id_carrito</pre>\n  <pre class=\"line before\"><span class=\"ws\">                    </span>FROM carrito</pre>\n  <pre class=\"line before\"><span class=\"ws\">                    </span>WHERE userdocument=%s AND userdocumenttype=%s ;&#34;&#34;&#34;</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>rows=None</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\n  <pre class=\"line current\"><span class=\"ws\">            </span>with self.connection.cursor() as cursor:\n  <span class=\"ws\">            </span>     ^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>cursor.execute(sqlQuery,(numberDocument,typeDocument))</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>rows=cursor.fetchall()</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>if(len(rows)!=0):</pre>\n  <pre class=\"line after\"><span class=\"ws\">                    </span>return True</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>else:</pre></div>\n  </div>\n  \n  <li><div class=\"exc-divider\">During handling of the above exception, another exception occurred:</div>\n  <li><div class=\"frame\" id=\"frame-1928343338384\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">1536</em>,\n        in <code class=\"function\">__call__</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">    </span>) -&gt; cabc.Iterable[bytes]:</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>&#34;&#34;&#34;The WSGI server calls the Flask application object as the</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>WSGI application. This calls :meth:`wsgi_app`, which can be</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>wrapped to apply middleware.</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>&#34;&#34;&#34;</pre>\n  <pre class=\"line current\"><span class=\"ws\">        </span>return self.wsgi_app(environ, start_response)\n  <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337520\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">1514</em>,\n        in <code class=\"function\">wsgi_app</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>ctx.push()</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>response = self.full_dispatch_request()</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>except Exception as e:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>error = e</pre>\n  <pre class=\"line current\"><span class=\"ws\">                </span>response = self.handle_exception(e)\n  <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>except:  # noqa: B001</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>error = sys.exc_info()[1]</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>raise</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>return response(environ, start_response)</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>finally:</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337376\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\"</cite>,\n        line <em class=\"line\">176</em>,\n        in <code class=\"function\">wrapped_function</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span># These error handlers will still respect the behavior of the route</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>if options.get(&#34;intercept_exceptions&#34;, True):</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>def _after_request_decorator(f):</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>def wrapped_function(*args, **kwargs):</pre>\n  <pre class=\"line current\"><span class=\"ws\">                    </span>return cors_after_request(app.make_response(f(*args, **kwargs)))\n  <span class=\"ws\">                    </span>                                            ^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>return wrapped_function</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>if hasattr(app, &#34;handle_exception&#34;):</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>app.handle_exception = _after_request_decorator(app.handle_exception)</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337664\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">1511</em>,\n        in <code class=\"function\">wsgi_app</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span>ctx = self.request_context(environ)</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>error: BaseException | None = None</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>ctx.push()</pre>\n  <pre class=\"line current\"><span class=\"ws\">                </span>response = self.full_dispatch_request()\n  <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>except Exception as e:</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>error = e</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>response = self.handle_exception(e)</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>except:  # noqa: B001</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>error = sys.exc_info()[1]</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337808\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">919</em>,\n        in <code class=\"function\">full_dispatch_request</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>request_started.send(self, _async_wrapper=self.ensure_sync)</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>rv = self.preprocess_request()</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>if rv is None:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>rv = self.dispatch_request()</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>except Exception as e:</pre>\n  <pre class=\"line current\"><span class=\"ws\">            </span>rv = self.handle_user_exception(e)\n  <span class=\"ws\">            </span>     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return self.finalize_request(rv)</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>def finalize_request(</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>self,</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>rv: ft.ResponseReturnValue | HTTPException,</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337952\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\"</cite>,\n        line <em class=\"line\">176</em>,\n        in <code class=\"function\">wrapped_function</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span># These error handlers will still respect the behavior of the route</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>if options.get(&#34;intercept_exceptions&#34;, True):</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>def _after_request_decorator(f):</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>def wrapped_function(*args, **kwargs):</pre>\n  <pre class=\"line current\"><span class=\"ws\">                    </span>return cors_after_request(app.make_response(f(*args, **kwargs)))\n  <span class=\"ws\">                    </span>                                            ^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>return wrapped_function</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>if hasattr(app, &#34;handle_exception&#34;):</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>app.handle_exception = _after_request_decorator(app.handle_exception)</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343338096\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">917</em>,\n        in <code class=\"function\">full_dispatch_request</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>request_started.send(self, _async_wrapper=self.ensure_sync)</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>rv = self.preprocess_request()</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>if rv is None:</pre>\n  <pre class=\"line current\"><span class=\"ws\">                </span>rv = self.dispatch_request()\n  <span class=\"ws\">                </span>     ^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>except Exception as e:</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>rv = self.handle_user_exception(e)</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return self.finalize_request(rv)</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>def finalize_request(</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343338240\">\n    <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\n        line <em class=\"line\">902</em>,\n        in <code class=\"function\">dispatch_request</code></h4>\n    <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>and req.method == &#34;OPTIONS&#34;</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>):</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>return self.make_default_options_response()</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span># otherwise dispatch to the handler for that endpoint</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]</pre>\n  <pre class=\"line current\"><span class=\"ws\">        </span>return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>def full_dispatch_request(self) -&gt; Response:</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>&#34;&#34;&#34;Dispatches the request and on top of that performs request</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>pre and postprocessing as well as HTTP exception catching and</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>error handling.</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343338528\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\"</cite>,\n        line <em class=\"line\">39</em>,\n        in <code class=\"function\">wrapper</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">            </span>except Exception as e:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span># 5. Contar errores de excepci\u00f3n</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>ERROR_COUNT.labels(endpoint=endpoint_name).inc()</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span># Medir tiempo aunque haya error</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>REQUEST_LATENCY.observe(time.time() - start_time)</pre>\n  <pre class=\"line current\"><span class=\"ws\">                </span>raise e  # Re-lanzar la excepci\u00f3n\n  <span class=\"ws\">                </span>^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return wrapper</pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>return decorator</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337088\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\"</cite>,\n        line <em class=\"line\">18</em>,\n        in <code class=\"function\">wrapper</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">            </span># 2. Contar la petici\u00f3n</pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>REQUEST_COUNT.labels(method=request.method, endpoint=endpoint_name).inc()</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span># 3. Ejecutar la funci\u00f3n</pre>\n  <pre class=\"line current\"><span class=\"ws\">                </span>response = func(*args, **kwargs)\n  <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span># 4. Medir tiempo total</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>REQUEST_LATENCY.observe(time.time() - start_time)</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span># 5. Verificar si hay errores HTTP (4xx, 5xx)</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343338672\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py\"</cite>,\n        line <em class=\"line\">60</em>,\n        in <code class=\"function\">crear_carrito</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\"></span>@bp.route(&#34;/carrito/create&#34;,methods=[&#34;POST&#34;])</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span>@monitor_endpoint(&#34;crear_carrito&#34;)</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span>def crear_carrito():</pre>\n  <pre class=\"line before\"><span class=\"ws\">    </span>data=request.get_json()</pre>\n  <pre class=\"line before\"><span class=\"ws\">    </span>#Esta data se pasa al caso de uso encargado</pre>\n  <pre class=\"line current\"><span class=\"ws\">    </span>resul=createCarUseCase.crearCarrito(data.get(&#34;userDocument&#34;),data.get(&#34;docType&#34;))\n  <span class=\"ws\">    </span>      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>#TODO: Cerrar conexi\u00f3n</pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>if(resul[&#34;Success&#34;]):</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return jsonify(resul),200</pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>else:</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return jsonify(resul),409</pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343337232\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py\"</cite>,\n        line <em class=\"line\">14</em>,\n        in <code class=\"function\">crearCarrito</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">    </span>crearCarrRepo:CrearCarrritoI</pre>\n  <pre class=\"line before\"><span class=\"ws\">    </span>utils:UtilsI</pre>\n  <pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line before\"><span class=\"ws\">    </span>def crearCarrito(self,usrDocument:str,userDocType:str):</pre>\n  <pre class=\"line current\"><span class=\"ws\">        </span>if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\n  <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">            </span>try:</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>new_carrito = Carrito(user_document=usrDocument,user_documentType=userDocType)</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>self.crearCarrRepo.crearCarrito(new_carrito)</pre>\n  <pre class=\"line after\"><span class=\"ws\">                </span>return {&#34;Success&#34;:True,&#34;message&#34;:&#34;Carrito creado con exito&#34;}</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre></div>\n  </div>\n  \n  <li><div class=\"frame\" id=\"frame-1928343945280\">\n    <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\"</cite>,\n        line <em class=\"line\">25</em>,\n        in <code class=\"function\">validarExistenciaCarrito</code></h4>\n    <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">                </span>if(len(rows)!=0):</pre>\n  <pre class=\"line before\"><span class=\"ws\">                    </span>return True</pre>\n  <pre class=\"line before\"><span class=\"ws\">                </span>else:</pre>\n  <pre class=\"line before\"><span class=\"ws\">                    </span>return False</pre>\n  <pre class=\"line before\"><span class=\"ws\">        </span>except Exception as e:</pre>\n  <pre class=\"line current\"><span class=\"ws\">            </span>raise ValueError(str(e))\n  <span class=\"ws\">            </span>^^^^^^^^^^^^^^^^^^^^^^^^</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>self.connection.close()</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>return False</pre>\n  <pre class=\"line after\"><span class=\"ws\"></span> </pre>\n  <pre class=\"line after\"><span class=\"ws\">    </span>def existsCarrito(self,id_carrito:int):</pre>\n  <pre class=\"line after\"><span class=\"ws\">        </span>try:</pre></div>\n  </div>\n  </ul>\n    <blockquote>ValueError: connection already closed\n  </blockquote>\n  </div>\n  \n  <div class=\"plain\">\n      <p>\n        This is the Copy/Paste friendly version of the traceback.\n      </p>\n      <textarea cols=\"50\" rows=\"10\" name=\"code\" readonly>Traceback (most recent call last):\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&#34;, line 17, in validarExistenciaCarrito\n      with self.connection.cursor() as cursor:\n           ~~~~~~~~~~~~~~~~~~~~~~^^\n  psycopg2.InterfaceError: connection already closed\n  \n  During handling of the above exception, another exception occurred:\n  \n  Traceback (most recent call last):\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1536, in __call__\n      return self.wsgi_app(environ, start_response)\n             ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1514, in wsgi_app\n      response = self.handle_exception(e)\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&#34;, line 176, in wrapped_function\n      return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                  ~^^^^^^^^^^^^^^^^^\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1511, in wsgi_app\n      response = self.full_dispatch_request()\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 919, in full_dispatch_request\n      rv = self.handle_user_exception(e)\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&#34;, line 176, in wrapped_function\n      return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                  ~^^^^^^^^^^^^^^^^^\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 917, in full_dispatch_request\n      rv = self.dispatch_request()\n    File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 902, in dispatch_request\n      return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&#34;, line 39, in wrapper\n      raise e  # Re-lanzar la excepci\u00f3n\n      ^^^^^^^\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&#34;, line 18, in wrapper\n      response = func(*args, **kwargs)\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py&#34;, line 60, in crear_carrito\n      resul=createCarUseCase.crearCarrito(data.get(&#34;userDocument&#34;),data.get(&#34;docType&#34;))\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py&#34;, line 14, in crearCarrito\n      if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\n             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n    File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&#34;, line 25, in validarExistenciaCarrito\n      raise ValueError(str(e))\n  ValueError: connection already closed\n  </textarea>\n  </div>\n  <div class=\"explanation\">\n    The debugger caught an exception in your WSGI application.  You can now\n    look at the traceback which led to the error.  <span class=\"nojavascript\">\n    If you enable JavaScript you can also use additional features such as code\n    execution (if the evalex feature is enabled), automatic pasting of the\n    exceptions and much more.</span>\n  </div>\n        <div class=\"footer\">\n          Brought to you by <strong class=\"arthur\">DON'T PANIC</strong>, your\n          friendly Werkzeug powered traceback interpreter.\n        </div>\n      </div>\n  \n      <div class=\"pin-prompt\">\n        <div class=\"inner\">\n          <h3>Console Locked</h3>\n          <p>\n            The console is locked and needs to be unlocked by entering the PIN.\n            You can find the PIN printed out on the standard output of your\n            shell that runs the server.\n          <form>\n            <p>PIN:\n              <input type=text name=pin size=14>\n              <input type=submit name=btn value=\"Confirm Pin\">\n          </form>\n        </div>\n      </div>\n    </body>\n  </html>\n  \n  <!--\n  \n  Traceback (most recent call last):\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\", line 17, in validarExistenciaCarrito\n      with self.connection.cursor() as cursor:\n           ~~~~~~~~~~~~~~~~~~~~~~^^\n  psycopg2.InterfaceError: connection already closed\n  \n  During handling of the above exception, another exception occurred:\n  \n  Traceback (most recent call last):\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n      return self.wsgi_app(environ, start_response)\n             ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1514, in wsgi_app\n      response = self.handle_exception(e)\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\", line 176, in wrapped_function\n      return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                  ~^^^^^^^^^^^^^^^^^\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n      response = self.full_dispatch_request()\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 919, in full_dispatch_request\n      rv = self.handle_user_exception(e)\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\", line 176, in wrapped_function\n      return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                  ~^^^^^^^^^^^^^^^^^\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n      rv = self.dispatch_request()\n    File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n      return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\", line 39, in wrapper\n      raise e  # Re-lanzar la excepci\u00f3n\n      ^^^^^^^\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\", line 18, in wrapper\n      response = func(*args, **kwargs)\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py\", line 60, in crear_carrito\n      resul=createCarUseCase.crearCarrito(data.get(\"userDocument\"),data.get(\"docType\"))\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py\", line 14, in crearCarrito\n      if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\n             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n    File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\", line 25, in validarExistenciaCarrito\n      raise ValueError(str(e))\n  ValueError: connection already closed\n  \n  \n  -->\n  \nassert 500 == 201\n +  where 500 = <Response [500]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 42, "message": "in test_crear_carrito_exitoso"}], "stderr": "2025-07-19 14:19:38,359 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 14:19:40,434 - root - INFO - Response: 500(28865 bytes )\n", "log": [{"name": "root", "msg": "POSThttp://localhost:5003/carrito/create", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952778.3595917, "msecs": 359.0, "relativeCreated": 7792.5387, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:38"}, {"name": "root", "msg": "Response: 500(28865 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952780.4343545, "msecs": 434.0, "relativeCreated": 9867.3014, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:40"}], "longrepr": "tests\\carrito\\test_api_integration.py:42: in test_crear_carrito_exitoso\n    assert response.status_code == 201, f\"Error creando carrito: {response.status_code} - {response.text}\"\nE   AssertionError: Error creando carrito: 500 - <!doctype html>\nE     <html lang=en>\nE       <head>\nE         <title>ValueError: connection already closed\nE      // Werkzeug Debugger</title>\nE         <link rel=\"stylesheet\" href=\"?__debugger__=yes&amp;cmd=resource&amp;f=style.css\">\nE         <link rel=\"shortcut icon\"\nE             href=\"?__debugger__=yes&amp;cmd=resource&amp;f=console.png\">\nE         <script src=\"?__debugger__=yes&amp;cmd=resource&amp;f=debugger.js\"></script>\nE         <script>\nE           var CONSOLE_MODE = false,\nE               EVALEX = true,\nE               EVALEX_TRUSTED = false,\nE               SECRET = \"nPBDzGGZTEmkBcSBWG3N\";\nE         </script>\nE       </head>\nE       <body style=\"background-color: #fff\">\nE         <div class=\"debugger\">\nE     <h1>ValueError</h1>\nE     <div class=\"detail\">\nE       <p class=\"errormsg\">ValueError: connection already closed\nE     </p>\nE     </div>\nE     <h2 class=\"traceback\">Traceback <em>(most recent call last)</em></h2>\nE     <div class=\"traceback\">\nE       <h3></h3>\nE       <ul><li><div class=\"frame\" id=\"frame-1928343945424\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\"</cite>,\nE           line <em class=\"line\">17</em>,\nE           in <code class=\"function\">validarExistenciaCarrito</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">        </span>sqlQuery=&#34;&#34;&#34;SELECT id_carrito</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                    </span>FROM carrito</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                    </span>WHERE userdocument=%s AND userdocumenttype=%s ;&#34;&#34;&#34;</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>rows=None</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\nE     <pre class=\"line current\"><span class=\"ws\">            </span>with self.connection.cursor() as cursor:\nE     <span class=\"ws\">            </span>     ^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>cursor.execute(sqlQuery,(numberDocument,typeDocument))</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>rows=cursor.fetchall()</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>if(len(rows)!=0):</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                    </span>return True</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>else:</pre></div>\nE     </div>\nE     \nE     <li><div class=\"exc-divider\">During handling of the above exception, another exception occurred:</div>\nE     <li><div class=\"frame\" id=\"frame-1928343338384\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">1536</em>,\nE           in <code class=\"function\">__call__</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">    </span>) -&gt; cabc.Iterable[bytes]:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>&#34;&#34;&#34;The WSGI server calls the Flask application object as the</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>WSGI application. This calls :meth:`wsgi_app`, which can be</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>wrapped to apply middleware.</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>&#34;&#34;&#34;</pre>\nE     <pre class=\"line current\"><span class=\"ws\">        </span>return self.wsgi_app(environ, start_response)\nE     <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337520\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">1514</em>,\nE           in <code class=\"function\">wsgi_app</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>ctx.push()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>response = self.full_dispatch_request()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>except Exception as e:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>error = e</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                </span>response = self.handle_exception(e)\nE     <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>except:  # noqa: B001</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>error = sys.exc_info()[1]</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>raise</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>return response(environ, start_response)</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>finally:</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337376\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\"</cite>,\nE           line <em class=\"line\">176</em>,\nE           in <code class=\"function\">wrapped_function</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span># These error handlers will still respect the behavior of the route</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>if options.get(&#34;intercept_exceptions&#34;, True):</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>def _after_request_decorator(f):</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>def wrapped_function(*args, **kwargs):</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                    </span>return cors_after_request(app.make_response(f(*args, **kwargs)))\nE     <span class=\"ws\">                    </span>                                            ^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>return wrapped_function</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>if hasattr(app, &#34;handle_exception&#34;):</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>app.handle_exception = _after_request_decorator(app.handle_exception)</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337664\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">1511</em>,\nE           in <code class=\"function\">wsgi_app</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span>ctx = self.request_context(environ)</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>error: BaseException | None = None</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>ctx.push()</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                </span>response = self.full_dispatch_request()\nE     <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>except Exception as e:</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>error = e</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>response = self.handle_exception(e)</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>except:  # noqa: B001</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>error = sys.exc_info()[1]</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337808\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">919</em>,\nE           in <code class=\"function\">full_dispatch_request</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>request_started.send(self, _async_wrapper=self.ensure_sync)</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>rv = self.preprocess_request()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>if rv is None:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>rv = self.dispatch_request()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>except Exception as e:</pre>\nE     <pre class=\"line current\"><span class=\"ws\">            </span>rv = self.handle_user_exception(e)\nE     <span class=\"ws\">            </span>     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return self.finalize_request(rv)</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>def finalize_request(</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>self,</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>rv: ft.ResponseReturnValue | HTTPException,</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337952\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\"</cite>,\nE           line <em class=\"line\">176</em>,\nE           in <code class=\"function\">wrapped_function</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">        </span># These error handlers will still respect the behavior of the route</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>if options.get(&#34;intercept_exceptions&#34;, True):</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>def _after_request_decorator(f):</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>def wrapped_function(*args, **kwargs):</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                    </span>return cors_after_request(app.make_response(f(*args, **kwargs)))\nE     <span class=\"ws\">                    </span>                                            ^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>return wrapped_function</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>if hasattr(app, &#34;handle_exception&#34;):</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>app.handle_exception = _after_request_decorator(app.handle_exception)</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343338096\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">917</em>,\nE           in <code class=\"function\">full_dispatch_request</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>try:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>request_started.send(self, _async_wrapper=self.ensure_sync)</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>rv = self.preprocess_request()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>if rv is None:</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                </span>rv = self.dispatch_request()\nE     <span class=\"ws\">                </span>     ^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>except Exception as e:</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>rv = self.handle_user_exception(e)</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return self.finalize_request(rv)</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>def finalize_request(</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343338240\">\nE       <h4>File <cite class=\"filename\">\"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\"</cite>,\nE           line <em class=\"line\">902</em>,\nE           in <code class=\"function\">dispatch_request</code></h4>\nE       <div class=\"source library\"><pre class=\"line before\"><span class=\"ws\">            </span>and req.method == &#34;OPTIONS&#34;</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>):</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>return self.make_default_options_response()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span># otherwise dispatch to the handler for that endpoint</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>view_args: dict[str, t.Any] = req.view_args  # type: ignore[assignment]</pre>\nE     <pre class=\"line current\"><span class=\"ws\">        </span>return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE     <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>def full_dispatch_request(self) -&gt; Response:</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>&#34;&#34;&#34;Dispatches the request and on top of that performs request</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>pre and postprocessing as well as HTTP exception catching and</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>error handling.</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343338528\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\"</cite>,\nE           line <em class=\"line\">39</em>,\nE           in <code class=\"function\">wrapper</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">            </span>except Exception as e:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span># 5. Contar errores de excepci\u00f3n</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>ERROR_COUNT.labels(endpoint=endpoint_name).inc()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span># Medir tiempo aunque haya error</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>REQUEST_LATENCY.observe(time.time() - start_time)</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                </span>raise e  # Re-lanzar la excepci\u00f3n\nE     <span class=\"ws\">                </span>^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return wrapper</pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>return decorator</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337088\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\"</cite>,\nE           line <em class=\"line\">18</em>,\nE           in <code class=\"function\">wrapper</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">            </span># 2. Contar la petici\u00f3n</pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>REQUEST_COUNT.labels(method=request.method, endpoint=endpoint_name).inc()</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\">            </span>try:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span># 3. Ejecutar la funci\u00f3n</pre>\nE     <pre class=\"line current\"><span class=\"ws\">                </span>response = func(*args, **kwargs)\nE     <span class=\"ws\">                </span>           ^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span># 4. Medir tiempo total</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>REQUEST_LATENCY.observe(time.time() - start_time)</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span># 5. Verificar si hay errores HTTP (4xx, 5xx)</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343338672\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py\"</cite>,\nE           line <em class=\"line\">60</em>,\nE           in <code class=\"function\">crear_carrito</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\"></span>@bp.route(&#34;/carrito/create&#34;,methods=[&#34;POST&#34;])</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span>@monitor_endpoint(&#34;crear_carrito&#34;)</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span>def crear_carrito():</pre>\nE     <pre class=\"line before\"><span class=\"ws\">    </span>data=request.get_json()</pre>\nE     <pre class=\"line before\"><span class=\"ws\">    </span>#Esta data se pasa al caso de uso encargado</pre>\nE     <pre class=\"line current\"><span class=\"ws\">    </span>resul=createCarUseCase.crearCarrito(data.get(&#34;userDocument&#34;),data.get(&#34;docType&#34;))\nE     <span class=\"ws\">    </span>      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>#TODO: Cerrar conexi\u00f3n</pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>if(resul[&#34;Success&#34;]):</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return jsonify(resul),200</pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>else:</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return jsonify(resul),409</pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343337232\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py\"</cite>,\nE           line <em class=\"line\">14</em>,\nE           in <code class=\"function\">crearCarrito</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">    </span>crearCarrRepo:CrearCarrritoI</pre>\nE     <pre class=\"line before\"><span class=\"ws\">    </span>utils:UtilsI</pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line before\"><span class=\"ws\">    </span>def crearCarrito(self,usrDocument:str,userDocType:str):</pre>\nE     <pre class=\"line current\"><span class=\"ws\">        </span>if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE     <span class=\"ws\">        </span>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">            </span>try:</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>new_carrito = Carrito(user_document=usrDocument,user_documentType=userDocType)</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>self.crearCarrRepo.crearCarrito(new_carrito)</pre>\nE     <pre class=\"line after\"><span class=\"ws\">                </span>return {&#34;Success&#34;:True,&#34;message&#34;:&#34;Carrito creado con exito&#34;}</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre></div>\nE     </div>\nE     \nE     <li><div class=\"frame\" id=\"frame-1928343945280\">\nE       <h4>File <cite class=\"filename\">\"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\"</cite>,\nE           line <em class=\"line\">25</em>,\nE           in <code class=\"function\">validarExistenciaCarrito</code></h4>\nE       <div class=\"source \"><pre class=\"line before\"><span class=\"ws\">                </span>if(len(rows)!=0):</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                    </span>return True</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                </span>else:</pre>\nE     <pre class=\"line before\"><span class=\"ws\">                    </span>return False</pre>\nE     <pre class=\"line before\"><span class=\"ws\">        </span>except Exception as e:</pre>\nE     <pre class=\"line current\"><span class=\"ws\">            </span>raise ValueError(str(e))\nE     <span class=\"ws\">            </span>^^^^^^^^^^^^^^^^^^^^^^^^</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>self.connection.close()</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>return False</pre>\nE     <pre class=\"line after\"><span class=\"ws\"></span> </pre>\nE     <pre class=\"line after\"><span class=\"ws\">    </span>def existsCarrito(self,id_carrito:int):</pre>\nE     <pre class=\"line after\"><span class=\"ws\">        </span>try:</pre></div>\nE     </div>\nE     </ul>\nE       <blockquote>ValueError: connection already closed\nE     </blockquote>\nE     </div>\nE     \nE     <div class=\"plain\">\nE         <p>\nE           This is the Copy/Paste friendly version of the traceback.\nE         </p>\nE         <textarea cols=\"50\" rows=\"10\" name=\"code\" readonly>Traceback (most recent call last):\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&#34;, line 17, in validarExistenciaCarrito\nE         with self.connection.cursor() as cursor:\nE              ~~~~~~~~~~~~~~~~~~~~~~^^\nE     psycopg2.InterfaceError: connection already closed\nE     \nE     During handling of the above exception, another exception occurred:\nE     \nE     Traceback (most recent call last):\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1536, in __call__\nE         return self.wsgi_app(environ, start_response)\nE                ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1514, in wsgi_app\nE         response = self.handle_exception(e)\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&#34;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 1511, in wsgi_app\nE         response = self.full_dispatch_request()\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 919, in full_dispatch_request\nE         rv = self.handle_user_exception(e)\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py&#34;, line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 917, in full_dispatch_request\nE         rv = self.dispatch_request()\nE       File &#34;C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py&#34;, line 902, in dispatch_request\nE         return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&#34;, line 39, in wrapper\nE         raise e  # Re-lanzar la excepci\u00f3n\nE         ^^^^^^^\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py&#34;, line 18, in wrapper\nE         response = func(*args, **kwargs)\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py&#34;, line 60, in crear_carrito\nE         resul=createCarUseCase.crearCarrito(data.get(&#34;userDocument&#34;),data.get(&#34;docType&#34;))\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py&#34;, line 14, in crearCarrito\nE         if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File &#34;D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py&#34;, line 25, in validarExistenciaCarrito\nE         raise ValueError(str(e))\nE     ValueError: connection already closed\nE     </textarea>\nE     </div>\nE     <div class=\"explanation\">\nE       The debugger caught an exception in your WSGI application.  You can now\nE       look at the traceback which led to the error.  <span class=\"nojavascript\">\nE       If you enable JavaScript you can also use additional features such as code\nE       execution (if the evalex feature is enabled), automatic pasting of the\nE       exceptions and much more.</span>\nE     </div>\nE           <div class=\"footer\">\nE             Brought to you by <strong class=\"arthur\">DON'T PANIC</strong>, your\nE             friendly Werkzeug powered traceback interpreter.\nE           </div>\nE         </div>\nE     \nE         <div class=\"pin-prompt\">\nE           <div class=\"inner\">\nE             <h3>Console Locked</h3>\nE             <p>\nE               The console is locked and needs to be unlocked by entering the PIN.\nE               You can find the PIN printed out on the standard output of your\nE               shell that runs the server.\nE             <form>\nE               <p>PIN:\nE                 <input type=text name=pin size=14>\nE                 <input type=submit name=btn value=\"Confirm Pin\">\nE             </form>\nE           </div>\nE         </div>\nE       </body>\nE     </html>\nE     \nE     <!--\nE     \nE     Traceback (most recent call last):\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\", line 17, in validarExistenciaCarrito\nE         with self.connection.cursor() as cursor:\nE              ~~~~~~~~~~~~~~~~~~~~~~^^\nE     psycopg2.InterfaceError: connection already closed\nE     \nE     During handling of the above exception, another exception occurred:\nE     \nE     Traceback (most recent call last):\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\nE         return self.wsgi_app(environ, start_response)\nE                ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1514, in wsgi_app\nE         response = self.handle_exception(e)\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\", line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\nE         response = self.full_dispatch_request()\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 919, in full_dispatch_request\nE         rv = self.handle_user_exception(e)\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask_cors\\extension.py\", line 176, in wrapped_function\nE         return cors_after_request(app.make_response(f(*args, **kwargs)))\nE                                                     ~^^^^^^^^^^^^^^^^^\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\nE         rv = self.dispatch_request()\nE       File \"C:\\Users\\Usuario\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\nE         return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\", line 39, in wrapper\nE         raise e  # Re-lanzar la excepci\u00f3n\nE         ^^^^^^^\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\MetricsDecorator.py\", line 18, in wrapper\nE         response = func(*args, **kwargs)\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Infraestructure\\Routes.py\", line 60, in crear_carrito\nE         resul=createCarUseCase.crearCarrito(data.get(\"userDocument\"),data.get(\"docType\"))\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\Application\\UseCases\\CrearCarritoUseCase.py\", line 14, in crearCarrito\nE         if(not(self.utils.validarExistenciaCarrito(usrDocument,userDocType))): #Si el carrito no existe se crea uno\nE                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\nE       File \"D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Carrito\\GestionCarrito\\InterfaceAdapters\\UtilsAdapter.py\", line 25, in validarExistenciaCarrito\nE         raise ValueError(str(e))\nE     ValueError: connection already closed\nE     \nE     \nE     -->\nE     \nE   assert 500 == 201\nE    +  where 500 = <Response [500]>.status_code"}, "teardown": {"duration": 0.021913599979598075, "outcome": "passed", "stderr": "2025-07-19 14:19:41,073 - conftest - INFO - \u2705 Completado: test_crear_carrito_exitoso\n2025-07-19 14:19:41,090 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.73s\n2025-07-19 14:19:41,092 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_crear_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952781.073771, "msecs": 73.0, "relativeCreated": 10506.718, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 2.73s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952781.0905035, "msecs": 90.0, "relativeCreated": 10523.4502, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952781.0922506, "msecs": 92.0, "relativeCreated": 10525.1975, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_a_carrito", "lineno": 63, "outcome": "failed", "keywords": ["test_agregar_producto_a_carrito", "integration", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004331200034357607, "outcome": "passed", "stderr": "2025-07-19 14:19:41,106 - conftest - INFO - \ud83e\uddea Ejecutando: test_agregar_producto_a_carrito\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_agregar_producto_a_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952781.1061468, "msecs": 106.0, "relativeCreated": 10539.0938, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}]}, "call": {"duration": 8.182166200014763, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 122, "message": "AssertionError: Agregar producto muy lento: 6128.66ms (max: 400ms)\nassert 6128.662109375 <= 400"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 122, "message": "in test_agregar_producto_a_carrito"}], "stderr": "2025-07-19 14:19:41,110 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 14:19:41,112 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 14:19:47,239 - root - INFO - Response: 200(412 bytes )\n2025-07-19 14:19:47,241 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/1\n2025-07-19 14:19:49,291 - root - INFO - Response: 201(48 bytes )\n", "log": [{"name": "carrito.conftest", "msg": "\ud83d\uded2 Carrito registrado para limpieza: 1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "track_carrito", "created": 1752952781.110809, "msecs": 110.0, "relativeCreated": 10543.7561, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}, {"name": "root", "msg": "POSThttp://localhost:5003/carrito/addProduct", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952781.1123784, "msecs": 112.0, "relativeCreated": 10545.3253, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:41"}, {"name": "root", "msg": "Response: 200(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952787.2397506, "msecs": 239.0, "relativeCreated": 16672.6976, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:47"}, {"name": "root", "msg": "GEThttp://localhost:5003/carrito/getCarrito/1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952787.241378, "msecs": 241.0, "relativeCreated": 16674.3249, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:47"}, {"name": "root", "msg": "Response: 201(48 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952789.2910144, "msecs": 291.0, "relativeCreated": 18723.9613, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:49"}], "longrepr": "tests\\carrito\\test_api_integration.py:122: in test_agregar_producto_a_carrito\n    assert response_time <= threshold, f\"Agregar producto muy lento: {response_time:.2f}ms (max: {threshold}ms)\"\nE   AssertionError: Agregar producto muy lento: 6128.66ms (max: 400ms)\nE   assert 6128.662109375 <= 400"}, "teardown": {"duration": 2.0470854999730363, "outcome": "passed", "stderr": "2025-07-19 14:19:49,310 - conftest - INFO - \u2705 Completado: test_agregar_producto_a_carrito\n2025-07-19 14:19:49,312 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 14:19:51,352 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 14:19:51,353 - carrito.conftest - INFO - \ud83d\udcca Test completado en 10.24s\n2025-07-19 14:19:51,355 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_agregar_producto_a_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952789.31067, "msecs": 310.0, "relativeCreated": 18743.6167, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:49"}, {"name": "carrito.conftest", "msg": "\ud83e\uddf9 Limpiando 1 carritos de prueba...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "created_carritos_cleanup", "created": 1752952789.312529, "msecs": 312.0, "relativeCreated": 18745.4761, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:49"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f Error HTTP limpiando carrito 1: 400", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 114, "funcName": "created_carritos_cleanup", "created": 1752952791.352078, "msecs": 352.0, "relativeCreated": 20785.025, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 10.24s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952791.3538969, "msecs": 353.0, "relativeCreated": 20786.8438, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952791.3551962, "msecs": 355.0, "relativeCreated": 20788.1431, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_exitoso", "lineno": 125, "outcome": "failed", "keywords": ["test_obtener_carrito_exitoso", "integration", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004100700025446713, "outcome": "passed", "stderr": "2025-07-19 14:19:51,359 - conftest - INFO - \ud83e\uddea Ejecutando: test_obtener_carrito_exitoso\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_obtener_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952791.3599174, "msecs": 359.0, "relativeCreated": 20792.8643, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}]}, "call": {"duration": 2.0637372999917716, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 147, "message": "AssertionError: Error obteniendo carrito: 201 - {\n    \"Success\": false,\n    \"message\": \"'result'\"\n  }\n  \nassert 201 == 200\n +  where 201 = <Response [201]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 147, "message": "in test_obtener_carrito_exitoso"}], "stderr": "2025-07-19 14:19:51,364 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 14:19:51,366 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/1\n2025-07-19 14:19:53,425 - root - INFO - Response: 201(48 bytes )\n", "log": [{"name": "carrito.conftest", "msg": "\ud83d\uded2 Carrito registrado para limpieza: 1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "track_carrito", "created": 1752952791.364178, "msecs": 364.0, "relativeCreated": 20797.1249, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}, {"name": "root", "msg": "GEThttp://localhost:5003/carrito/getCarrito/1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952791.3660746, "msecs": 366.0, "relativeCreated": 20799.0216, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:51"}, {"name": "root", "msg": "Response: 201(48 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952793.4254963, "msecs": 425.0, "relativeCreated": 22858.4433, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:53"}], "longrepr": "tests\\carrito\\test_api_integration.py:147: in test_obtener_carrito_exitoso\n    assert response.status_code == 200, f\"Error obteniendo carrito: {response.status_code} - {response.text}\"\nE   AssertionError: Error obteniendo carrito: 201 - {\nE       \"Success\": false,\nE       \"message\": \"'result'\"\nE     }\nE     \nE   assert 201 == 200\nE    +  where 201 = <Response [201]>.status_code"}, "teardown": {"duration": 2.044432200025767, "outcome": "passed", "stderr": "2025-07-19 14:19:53,442 - conftest - INFO - \u2705 Completado: test_obtener_carrito_exitoso\n2025-07-19 14:19:53,445 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 14:19:55,482 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 14:19:55,483 - carrito.conftest - INFO - \ud83d\udcca Test completado en 4.12s\n2025-07-19 14:19:55,484 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_obtener_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952793.442061, "msecs": 442.0, "relativeCreated": 22875.0079, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:53"}, {"name": "carrito.conftest", "msg": "\ud83e\uddf9 Limpiando 1 carritos de prueba...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "created_carritos_cleanup", "created": 1752952793.4450305, "msecs": 445.0, "relativeCreated": 22877.9772, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:53"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f Error HTTP limpiando carrito 1: 400", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 114, "funcName": "created_carritos_cleanup", "created": 1752952795.4828978, "msecs": 482.0, "relativeCreated": 24915.8445, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 4.12s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952795.483973, "msecs": 483.0, "relativeCreated": 24916.9199, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952795.484686, "msecs": 484.0, "relativeCreated": 24917.6327, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_cambiar_cantidad_producto", "lineno": 174, "outcome": "failed", "keywords": ["test_cambiar_cantidad_producto", "integration", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004122300015296787, "outcome": "passed", "stderr": "2025-07-19 14:19:55,488 - conftest - INFO - \ud83e\uddea Ejecutando: test_cambiar_cantidad_producto\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_cambiar_cantidad_producto", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952795.488529, "msecs": 488.0, "relativeCreated": 24921.4757, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}]}, "call": {"duration": 12.220710499968845, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 209, "message": "AssertionError: Error cambiando cantidad: 500 - {\n    \"Success\": false,\n    \"message\": \"HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /products/PROD-577D6765 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001C0FA2E3790>: Failed to establish a new connection: [WinError 10061] No se puede establecer una conexi\\u00f3n ya que el equipo de destino deneg\\u00f3 expresamente dicha conexi\\u00f3n'))\"\n  }\n  \nassert 500 == 200\n +  where 500 = <Response [500]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 209, "message": "in test_cambiar_cantidad_producto"}], "stderr": "2025-07-19 14:19:55,492 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 14:19:55,494 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 14:20:01,586 - root - INFO - Response: 200(412 bytes )\n2025-07-19 14:20:01,589 - root - INFO - PUThttp://localhost:5003/carrito/changeQuantity\n2025-07-19 14:20:07,711 - root - INFO - Response: 500(412 bytes )\n", "log": [{"name": "carrito.conftest", "msg": "\ud83d\uded2 Carrito registrado para limpieza: 1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "track_carrito", "created": 1752952795.492837, "msecs": 492.0, "relativeCreated": 24925.7838, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}, {"name": "root", "msg": "POSThttp://localhost:5003/carrito/addProduct", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952795.4947524, "msecs": 494.0, "relativeCreated": 24927.6994, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:19:55"}, {"name": "root", "msg": "Response: 200(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952801.586648, "msecs": 586.0, "relativeCreated": 31019.5949, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:01"}, {"name": "root", "msg": "PUThttp://localhost:5003/carrito/changeQuantity", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952801.589208, "msecs": 589.0, "relativeCreated": 31022.1548, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:01"}, {"name": "root", "msg": "Response: 500(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952807.7116597, "msecs": 711.0, "relativeCreated": 37144.6067, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:07"}], "longrepr": "tests\\carrito\\test_api_integration.py:209: in test_cambiar_cantidad_producto\n    assert response.status_code == 200, f\"Error cambiando cantidad: {response.status_code} - {response.text}\"\nE   AssertionError: Error cambiando cantidad: 500 - {\nE       \"Success\": false,\nE       \"message\": \"HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /products/PROD-577D6765 (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001C0FA2E3790>: Failed to establish a new connection: [WinError 10061] No se puede establecer una conexi\\u00f3n ya que el equipo de destino deneg\\u00f3 expresamente dicha conexi\\u00f3n'))\"\nE     }\nE     \nE   assert 500 == 200\nE    +  where 500 = <Response [500]>.status_code"}, "teardown": {"duration": 2.048266400001012, "outcome": "passed", "stderr": "2025-07-19 14:20:07,727 - conftest - INFO - \u2705 Completado: test_cambiar_cantidad_producto\n2025-07-19 14:20:07,728 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 14:20:09,770 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 14:20:09,771 - carrito.conftest - INFO - \ud83d\udcca Test completado en 14.28s\n2025-07-19 14:20:09,773 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_cambiar_cantidad_producto", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952807.727139, "msecs": 727.0, "relativeCreated": 37160.0859, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:07"}, {"name": "carrito.conftest", "msg": "\ud83e\uddf9 Limpiando 1 carritos de prueba...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "created_carritos_cleanup", "created": 1752952807.7287521, "msecs": 728.0, "relativeCreated": 37161.6991, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:07"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f Error HTTP limpiando carrito 1: 400", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 114, "funcName": "created_carritos_cleanup", "created": 1752952809.77019, "msecs": 770.0, "relativeCreated": 39203.137, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 14.28s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952809.771678, "msecs": 771.0, "relativeCreated": 39204.6248, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952809.7730641, "msecs": 773.0, "relativeCreated": 39206.011, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_vaciar_carrito_exitoso", "lineno": 216, "outcome": "failed", "keywords": ["test_vaciar_carrito_exitoso", "integration", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.003194799995981157, "outcome": "passed", "stderr": "2025-07-19 14:20:09,777 - conftest - INFO - \ud83e\uddea Ejecutando: test_vaciar_carrito_exitoso\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_vaciar_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952809.7773585, "msecs": 777.0, "relativeCreated": 39210.3055, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}]}, "call": {"duration": 8.19243989995448, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 246, "message": "AssertionError: Error vaciando carrito: 400 - {\n    \"Success\": false,\n    \"message\": \"No se ha enviado un id de carrito para procesar la solicitud\"\n  }\n  \nassert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 246, "message": "in test_vaciar_carrito_exitoso"}], "stderr": "2025-07-19 14:20:09,780 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 14:20:09,782 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 14:20:15,938 - root - INFO - Response: 200(412 bytes )\n2025-07-19 14:20:15,939 - root - INFO - DELETEhttp://localhost:5003/carrito/vaciar\n2025-07-19 14:20:17,971 - root - INFO - Response: 400(100 bytes )\n", "log": [{"name": "carrito.conftest", "msg": "\ud83d\uded2 Carrito registrado para limpieza: 1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "track_carrito", "created": 1752952809.7807534, "msecs": 780.0, "relativeCreated": 39213.7002, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}, {"name": "root", "msg": "POSThttp://localhost:5003/carrito/addProduct", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952809.7821705, "msecs": 782.0, "relativeCreated": 39215.1175, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:09"}, {"name": "root", "msg": "Response: 200(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952815.9380257, "msecs": 938.0, "relativeCreated": 45370.9726, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:15"}, {"name": "root", "msg": "DELETEhttp://localhost:5003/carrito/vaciar", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952815.9390283, "msecs": 939.0, "relativeCreated": 45371.975, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:15"}, {"name": "root", "msg": "Response: 400(100 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952817.9711647, "msecs": 971.0, "relativeCreated": 47404.1117, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:17"}], "longrepr": "tests\\carrito\\test_api_integration.py:246: in test_vaciar_carrito_exitoso\n    assert response.status_code == 200, f\"Error vaciando carrito: {response.status_code} - {response.text}\"\nE   AssertionError: Error vaciando carrito: 400 - {\nE       \"Success\": false,\nE       \"message\": \"No se ha enviado un id de carrito para procesar la solicitud\"\nE     }\nE     \nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 2.0529995000106283, "outcome": "passed", "stderr": "2025-07-19 14:20:17,989 - conftest - INFO - \u2705 Completado: test_vaciar_carrito_exitoso\n2025-07-19 14:20:17,993 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 14:20:20,039 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 14:20:20,040 - carrito.conftest - INFO - \ud83d\udcca Test completado en 10.26s\n2025-07-19 14:20:20,041 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_vaciar_carrito_exitoso", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952817.9899638, "msecs": 989.0, "relativeCreated": 47422.9108, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:17"}, {"name": "carrito.conftest", "msg": "\ud83e\uddf9 Limpiando 1 carritos de prueba...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "created_carritos_cleanup", "created": 1752952817.993024, "msecs": 993.0, "relativeCreated": 47425.9708, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:17"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f Error HTTP limpiando carrito 1: 400", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 114, "funcName": "created_carritos_cleanup", "created": 1752952820.0391407, "msecs": 39.0, "relativeCreated": 49472.0876, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:20"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 10.26s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952820.0403004, "msecs": 40.0, "relativeCreated": 49473.2471, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:20"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952820.0413048, "msecs": 41.0, "relativeCreated": 49474.2517, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:20"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_obtener_carrito_inexistente", "lineno": 255, "outcome": "failed", "keywords": ["test_obtener_carrito_inexistente", "error_handling", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004175000009126961, "outcome": "passed", "stderr": "2025-07-19 14:20:20,044 - conftest - INFO - \ud83e\uddea Ejecutando: test_obtener_carrito_inexistente\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_obtener_carrito_inexistente", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952820.0446067, "msecs": 44.0, "relativeCreated": 49477.5537, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:20"}]}, "call": {"duration": 2.0406720000319183, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 274, "message": "AssertionError: Deber\u00eda retornar 404 para carrito inexistente, obtuvo: 201\nassert 201 == 404\n +  where 201 = <Response [201]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 274, "message": "in test_obtener_carrito_inexistente"}], "stderr": "2025-07-19 14:20:20,049 - root - INFO - GEThttp://localhost:5003/carrito/getCarrito/999999\n2025-07-19 14:20:22,088 - root - INFO - Response: 201(48 bytes )\n", "log": [{"name": "root", "msg": "GEThttp://localhost:5003/carrito/getCarrito/999999", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952820.0492096, "msecs": 49.0, "relativeCreated": 49482.1566, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:20"}, {"name": "root", "msg": "Response: 201(48 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952822.088163, "msecs": 88.0, "relativeCreated": 51521.1098, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}], "longrepr": "tests\\carrito\\test_api_integration.py:274: in test_obtener_carrito_inexistente\n    assert response.status_code == 404, f\"Deber\u00eda retornar 404 para carrito inexistente, obtuvo: {response.status_code}\"\nE   AssertionError: Deber\u00eda retornar 404 para carrito inexistente, obtuvo: 201\nE   assert 201 == 404\nE    +  where 201 = <Response [201]>.status_code"}, "teardown": {"duration": 0.00701840000692755, "outcome": "passed", "stderr": "2025-07-19 14:20:22,105 - conftest - INFO - \u2705 Completado: test_obtener_carrito_inexistente\n2025-07-19 14:20:22,109 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.06s\n2025-07-19 14:20:22,110 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_obtener_carrito_inexistente", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952822.1059175, "msecs": 105.0, "relativeCreated": 51538.8643, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 2.06s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952822.10943, "msecs": 109.0, "relativeCreated": 51542.3768, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952822.1105866, "msecs": 110.0, "relativeCreated": 51543.5335, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_agregar_producto_carrito_inexistente", "lineno": 277, "outcome": "failed", "keywords": ["test_agregar_producto_carrito_inexistente", "error_handling", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.0032571000047028065, "outcome": "passed", "stderr": "2025-07-19 14:20:22,114 - conftest - INFO - \ud83e\uddea Ejecutando: test_agregar_producto_carrito_inexistente\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_agregar_producto_carrito_inexistente", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952822.1145852, "msecs": 114.0, "relativeCreated": 51547.5321, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}]}, "call": {"duration": 6.128863799967803, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 300, "message": "AssertionError: Deber\u00eda fallar con 400/404/500, obtuvo: 200\nassert 200 in [400, 404, 500]\n +  where 200 = <Response [200]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 300, "message": "in test_agregar_producto_carrito_inexistente"}], "stderr": "2025-07-19 14:20:22,118 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 14:20:28,244 - root - INFO - Response: 200(412 bytes )\n", "log": [{"name": "root", "msg": "POSThttp://localhost:5003/carrito/addProduct", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952822.1186314, "msecs": 118.0, "relativeCreated": 51551.5784, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:22"}, {"name": "root", "msg": "Response: 200(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952828.2448535, "msecs": 244.0, "relativeCreated": 57677.8003, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}], "longrepr": "tests\\carrito\\test_api_integration.py:300: in test_agregar_producto_carrito_inexistente\n    assert response.status_code in [400, 404, 500], f\"Deber\u00eda fallar con 400/404/500, obtuvo: {response.status_code}\"\nE   AssertionError: Deber\u00eda fallar con 400/404/500, obtuvo: 200\nE   assert 200 in [400, 404, 500]\nE    +  where 200 = <Response [200]>.status_code"}, "teardown": {"duration": 0.005197300051804632, "outcome": "passed", "stderr": "2025-07-19 14:20:28,266 - conftest - INFO - \u2705 Completado: test_agregar_producto_carrito_inexistente\n2025-07-19 14:20:28,268 - carrito.conftest - INFO - \ud83d\udcca Test completado en 6.15s\n2025-07-19 14:20:28,269 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_agregar_producto_carrito_inexistente", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952828.2663188, "msecs": 266.0, "relativeCreated": 57699.2657, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 6.15s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952828.2686946, "msecs": 268.0, "relativeCreated": 57701.6415, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952828.2697868, "msecs": 269.0, "relativeCreated": 57702.7337, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_datos_invalidos_crear_carrito", "lineno": 303, "outcome": "passed", "keywords": ["test_datos_invalidos_crear_carrito", "error_handling", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.002732299966737628, "outcome": "passed", "stderr": "2025-07-19 14:20:28,273 - conftest - INFO - \ud83e\uddea Ejecutando: test_datos_invalidos_crear_carrito\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_datos_invalidos_crear_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952828.2731388, "msecs": 273.0, "relativeCreated": 57706.0856, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}]}, "call": {"duration": 2.0651500000385568, "outcome": "passed", "stderr": "2025-07-19 14:20:28,276 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 14:20:30,339 - root - INFO - Response: 500(28865 bytes )\n", "log": [{"name": "root", "msg": "POSThttp://localhost:5003/carrito/create", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952828.2760394, "msecs": 276.0, "relativeCreated": 57708.9862, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:28"}, {"name": "root", "msg": "Response: 500(28865 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952830.3391862, "msecs": 339.0, "relativeCreated": 59772.1332, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}]}, "teardown": {"duration": 0.006627599999774247, "outcome": "passed", "stderr": "2025-07-19 14:20:30,342 - conftest - INFO - \u2705 Completado: test_datos_invalidos_crear_carrito\n2025-07-19 14:20:30,344 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.07s\n2025-07-19 14:20:30,346 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_datos_invalidos_crear_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952830.3422298, "msecs": 342.0, "relativeCreated": 59775.1766, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 2.07s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952830.344861, "msecs": 344.0, "relativeCreated": 59777.8079, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952830.346312, "msecs": 346.0, "relativeCreated": 59779.2589, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_crear_carrito_campos_faltantes", "lineno": 334, "outcome": "passed", "keywords": ["test_crear_carrito_campos_faltantes", "error_handling", "api", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004651000024750829, "outcome": "passed", "stderr": "2025-07-19 14:20:30,351 - conftest - INFO - \ud83e\uddea Ejecutando: test_crear_carrito_campos_faltantes\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_crear_carrito_campos_faltantes", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952830.351171, "msecs": 351.0, "relativeCreated": 59784.1179, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}]}, "call": {"duration": 2.0519762999610975, "outcome": "passed", "stderr": "2025-07-19 14:20:30,356 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 14:20:32,406 - root - INFO - Response: 500(28865 bytes )\n", "log": [{"name": "root", "msg": "POSThttp://localhost:5003/carrito/create", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952830.356172, "msecs": 356.0, "relativeCreated": 59789.119, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:30"}, {"name": "root", "msg": "Response: 500(28865 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952832.406548, "msecs": 406.0, "relativeCreated": 61839.4949, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}]}, "teardown": {"duration": 0.005239799967966974, "outcome": "passed", "stderr": "2025-07-19 14:20:32,408 - conftest - INFO - \u2705 Completado: test_crear_carrito_campos_faltantes\n2025-07-19 14:20:32,410 - carrito.conftest - INFO - \ud83d\udcca Test completado en 2.06s\n2025-07-19 14:20:32,411 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 1 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_crear_carrito_campos_faltantes", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952832.408609, "msecs": 408.0, "relativeCreated": 61841.5558, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 2.06s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952832.4103913, "msecs": 410.0, "relativeCreated": 61843.3381, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 1 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952832.411533, "msecs": 411.0, "relativeCreated": 61844.48, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}]}}, {"nodeid": "tests/carrito/test_api_integration.py::TestCarritoAPIIntegration::test_flujo_completo_carrito", "lineno": 358, "outcome": "failed", "keywords": ["test_flujo_completo_carrito", "smoke", "integration", "pytestmark", "TestCarritoAPIIntegration", "test_api_integration.py", "carrito", "tests", "IntegrationTests", ""], "setup": {"duration": 0.004665800021030009, "outcome": "passed", "stderr": "2025-07-19 14:20:32,415 - conftest - INFO - \ud83e\uddea Ejecutando: test_flujo_completo_carrito\n", "log": [{"name": "conftest", "msg": "\ud83e\uddea Ejecutando: test_flujo_completo_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 181, "funcName": "pytest_runtest_setup", "created": 1752952832.4155927, "msecs": 415.0, "relativeCreated": 61848.5397, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}]}, "call": {"duration": 14.312753100006375, "outcome": "failed", "crash": {"path": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\test_api_integration.py", "lineno": 395, "message": "AssertionError: Error cambiando cantidad: 500\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code"}, "traceback": [{"path": "tests\\carrito\\test_api_integration.py", "lineno": 395, "message": "in test_flujo_completo_carrito"}], "stderr": "2025-07-19 14:20:32,420 - root - INFO - POSThttp://localhost:5003/carrito/create\n2025-07-19 14:20:34,489 - root - INFO - Response: 500(28865 bytes )\n2025-07-19 14:20:34,490 - carrito.conftest - INFO - \ud83d\uded2 Carrito registrado para limpieza: 1\n2025-07-19 14:20:34,491 - root - INFO - POSThttp://localhost:5003/carrito/addProduct\n2025-07-19 14:20:40,620 - root - INFO - Response: 200(412 bytes )\n2025-07-19 14:20:40,621 - root - INFO - PUThttp://localhost:5003/carrito/changeQuantity\n2025-07-19 14:20:46,730 - root - INFO - Response: 500(412 bytes )\n", "log": [{"name": "root", "msg": "POSThttp://localhost:5003/carrito/create", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952832.4205987, "msecs": 420.0, "relativeCreated": 61853.5456, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:32"}, {"name": "root", "msg": "Response: 500(28865 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952834.48986, "msecs": 489.0, "relativeCreated": 63922.8071, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:34"}, {"name": "carrito.conftest", "msg": "\ud83d\uded2 Carrito registrado para limpieza: 1", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 92, "funcName": "track_carrito", "created": 1752952834.4905963, "msecs": 490.0, "relativeCreated": 63923.5432, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:34"}, {"name": "root", "msg": "POSThttp://localhost:5003/carrito/addProduct", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952834.4914145, "msecs": 491.0, "relativeCreated": 63924.3615, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:34"}, {"name": "root", "msg": "Response: 200(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952840.6202145, "msecs": 620.0, "relativeCreated": 70053.1614, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:40"}, {"name": "root", "msg": "PUThttp://localhost:5003/carrito/changeQuantity", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 29, "funcName": "_make_request", "created": 1752952840.62123, "msecs": 621.0, "relativeCreated": 70054.1767, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:40"}, {"name": "root", "msg": "Response: 500(412 bytes )", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\utils\\carrito\\api_client.py", "filename": "api_client.py", "module": "api_client", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 35, "funcName": "_make_request", "created": 1752952846.7306209, "msecs": 730.0, "relativeCreated": 76163.5679, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:46"}], "longrepr": "tests\\carrito\\test_api_integration.py:395: in test_flujo_completo_carrito\n    assert change_response.status_code == 200, f\"Error cambiando cantidad: {change_response.status_code}\"\nE   AssertionError: Error cambiando cantidad: 500\nE   assert 500 == 200\nE    +  where 500 = <Response [500]>.status_code"}, "teardown": {"duration": 2.048628300020937, "outcome": "passed", "stderr": "2025-07-19 14:20:46,754 - conftest - INFO - \u2705 Completado: test_flujo_completo_carrito\n2025-07-19 14:20:46,756 - carrito.conftest - INFO - \ud83e\uddf9 Limpiando 1 carritos de prueba...\n2025-07-19 14:20:48,797 - carrito.conftest - WARNING - \u26a0\ufe0f Error HTTP limpiando carrito 1: 400\n2025-07-19 14:20:48,798 - carrito.conftest - INFO - \ud83d\udcca Test completado en 16.38s\n2025-07-19 14:20:48,800 - carrito.conftest - INFO - \ud83d\udcc8 Requests: 0 total, 0 exitosos\n", "log": [{"name": "conftest", "msg": "\u2705 Completado: test_flujo_completo_carrito", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 185, "funcName": "pytest_runtest_teardown", "created": 1752952846.754841, "msecs": 754.0, "relativeCreated": 76187.7879, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:46"}, {"name": "carrito.conftest", "msg": "\ud83e\uddf9 Limpiando 1 carritos de prueba...", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 98, "funcName": "created_carritos_cleanup", "created": 1752952846.7566917, "msecs": 756.0, "relativeCreated": 76189.6387, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:46"}, {"name": "carrito.conftest", "msg": "\u26a0\ufe0f Error HTTP limpiando carrito 1: 400", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 114, "funcName": "created_carritos_cleanup", "created": 1752952848.7970343, "msecs": 797.0, "relativeCreated": 78229.9811, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:48"}, {"name": "carrito.conftest", "msg": "\ud83d\udcca Test completado en 16.38s", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 80, "funcName": "carrito_test_metrics", "created": 1752952848.7985482, "msecs": 798.0, "relativeCreated": 78231.4951, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:48"}, {"name": "carrito.conftest", "msg": "\ud83d\udcc8 Requests: 0 total, 0 exitosos", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "D:\\Documents\\UNAL\\Semestres\\9no Semestre\\Ingsoft II\\Proyecto\\Testing\\IntegrationTests\\tests\\carrito\\conftest.py", "filename": "conftest.py", "module": "conftest", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 81, "funcName": "carrito_test_metrics", "created": 1752952848.8002326, "msecs": 800.0, "relativeCreated": 78233.1797, "thread": 21276, "threadName": "MainThread", "processName": "MainProcess", "process": 19104, "taskName": null, "asctime": "2025-07-19 14:20:48"}]}}]}